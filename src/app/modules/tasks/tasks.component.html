<div class="container my-12 mx-auto px-12 md:px-12">
    <div class="flex flex-wrap -mx-1 lg:-mx-4">
        
        <div class="grid md:grid-cols-3 sm:grid-cols-1 gap-6 w-full mt-8 ">
  
            <div class="flex flex-col sm:col-span-6 md:col-span-6 bg-card bg-white shadow-lg rounded-lg p-6 h-full" >
                <div class="container mx-auto p-4">
                    <h1 class="text-2xl font-bold mb-4">Lista de Tareas</h1>
                    
                    <div class="flex flex-col sm:flex-row items-center">

                      <button mat-stroked-button (click)="filterTasks('all')" class="ml-3 rounded-full">Todas</button>
                      <button mat-stroked-button (click)="filterTasks('completed')"class="ml-3 rounded-full">Completadas</button>
                      <button mat-stroked-button (click)="filterTasks('pending')" class="ml-3 rounded-full">Pendientes</button>
                      
                      <div class="w-full m-2 mb-6 grid justify-items-end">
                              <button mat-raised-button color="primary" (click)="createTask()" type="button" class="mt-4">
                                  Crear tarea
                              </button>   
                      </div>
                    </div>

                    <table mat-table [dataSource]="dataSource" class="w-full">
                      <!-- Nombre de la Tarea -->
                      <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef> Nombre </th>
                        <td mat-cell *matCellDef="let task"> {{task.taskName}} </td>
                      </ng-container>
                  
                      <!-- Fecha Límite -->
                      <ng-container matColumnDef="deadline">
                        <th mat-header-cell *matHeaderCellDef> Fecha Límite </th>
                        <td mat-cell *matCellDef="let task"> {{task.deadline | date}} </td>
                      </ng-container>
                  
                      <!-- Estado -->
                      <ng-container matColumnDef="status">
                        <th mat-header-cell *matHeaderCellDef> Estado </th>
                        <td mat-cell *matCellDef="let task" class="rounded-full"> {{task.completed ? 'Completada' : 'Pendiente'}} </td>
                      </ng-container>
                  
                      <!-- Personas Asociadas -->
                      <ng-container matColumnDef="persons">
                        <th mat-header-cell *matHeaderCellDef> Personas Asociadas </th>
                        <td mat-cell *matCellDef="let task">
                          <ul>
                            <li *ngFor="let person of task.people">
                              {{person.fullName}} ({{person.age}} años)
                              <ul>
                                Habilidades:
                                <li *ngFor="let skill of person.skills">{{skill}}</li>
                              </ul>
                            </li>
                            <mat-divider></mat-divider>
                          </ul>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="options">
                        <th mat-header-cell *matHeaderCellDef> Opciones </th>
                        <td mat-cell *matCellDef="let task; let i = index">
                          <button mat-raised-button color="primary" (click)="updateTask(i,true)" type="button" class="mt-4">
                              COMPLETAR
                          </button>  
                        </td>
                      </ng-container>
                  
                      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    </table>
                 </div>
            </div>

        </div>
    </div>
</div>

